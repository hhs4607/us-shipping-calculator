<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>📦 배송비 비교 계산기 — MUSICUS</title>
  <meta name="description"
    content="FedEx Ground vs Amazon Shipping 미국 국내 + 일본 야마토 운송 배송비 계산기.">
  <link rel="stylesheet" href="css/style.css">
</head>

<body>

  <div class="container">

    <!-- ═══ Header ═══ -->
    <header class="header">
      <div class="header-brand">
        <span class="logo">📦</span>
        <div>
          <h1 id="header-title">배송비 비교 계산기</h1>
          <div class="subtitle">MUSICUS — Shipping Cost Calculator (V7)</div>
        </div>
      </div>
      <div class="header-actions">
        <button class="btn btn-help" id="btn-glossary" title="배송 용어 해설">📖 용어사전</button>
        <button class="btn btn-help" id="btn-guide" title="사용 가이드">❓ 사용법</button>
        <button class="btn" id="btn-share" title="링크 공유">🔗 공유</button>
        <button class="btn" id="btn-save" title="시나리오 저장">💾 저장</button>
        <button class="btn" id="btn-load" title="시나리오 불러오기">📂 불러오기</button>
        <button class="btn btn-sm" id="btn-export" title="JSON 내보내기">⬇ Export</button>
        <button class="btn btn-sm" id="btn-import" title="JSON 가져오기">⬆ Import</button>
        <a href="benchmark.html" class="btn btn-sm btn-benchmark" title="US 배송비 벤치마크">📊 US 벤치마크</a>
        <a href="benchmark-yamato.html" class="btn btn-sm btn-benchmark" title="Yamato 벤치마크">📊 JP 벤치마크</a>
      </div>
    </header>

    <!-- ═══ Shared Items Input (above tabs) ═══ -->
    <section class="card">
      <div class="card-title"><span class="icon">📋</span> 품목 입력</div>
      <div class="table-scroll">
        <table class="items-table">
          <thead>
            <tr>
              <th>#</th>
              <th>품명</th>
              <th id="th-dim-l">L(mm)</th>
              <th id="th-dim-w">W(mm)</th>
              <th id="th-dim-h">H(mm)</th>
              <th id="th-weight">중량(kg)</th>
              <th>수량</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="items-tbody"></tbody>
        </table>
      </div>
      <div class="table-actions">
        <div class="set-selector">
          <span class="set-label">세트 불러오기:</span>
          <button class="btn btn-set active" data-set="all" id="btn-set-all">All</button>
          <button class="btn btn-set" data-set="L" id="btn-set-l">L</button>
          <button class="btn btn-set" data-set="M" id="btn-set-m">M</button>
          <button class="btn btn-set" data-set="S" id="btn-set-s">S</button>
        </div>
        <div class="items-units">
          <div class="setting-group setting-group--inline">
            <label>치수</label>
            <div class="unit-toggle" id="unit-dim">
              <button data-value="mm" class="active">mm</button>
              <button data-value="cm">cm</button>
              <button data-value="inch">inch</button>
            </div>
          </div>
          <div class="setting-group setting-group--inline">
            <label>중량</label>
            <div class="unit-toggle" id="unit-weight">
              <button data-value="kg" class="active">kg</button>
              <button data-value="lb">lb</button>
            </div>
          </div>
        </div>
        <div class="action-buttons">
          <button class="btn btn-primary" id="btn-add-row">➕ 행 추가</button>
          <button class="btn" id="btn-reset">🔄 기본값 초기화</button>
        </div>
      </div>
    </section>

    <!-- ═══ Tab Navigation ═══ -->
    <nav class="tab-nav">
      <button class="tab-btn active" data-tab="us">🇺🇸 US Domestic</button>
      <button class="tab-btn" data-tab="yamato">🇯🇵 Japan Domestic</button>
    </nav>

    <!-- ════════════════════════════════════════════════════════════ -->
    <!-- US TAB: FedEx vs Amazon                                    -->
    <!-- ════════════════════════════════════════════════════════════ -->
    <div id="tab-us" class="tab-content active">

    <!-- ═══ US Settings ═══ -->
    <section class="card">
      <div class="card-title"><span class="icon">⚙️</span> US 배송 설정</div>
      <div class="settings-grid">
        <div class="setting-group">
          <label for="zone-select">Zone (배송 구간) <span class="tip"
              data-tip="출발지~도착지 거리 기반 구간. Zone 2(근거리)~Zone 8(장거리). 거리가 멀수록 운임 상승">ⓘ</span></label>
          <select id="zone-select">
            <option value="2">Zone 2 — 근거리 (0–150 mi)</option>
            <option value="3">Zone 3 — (151–300 mi)</option>
            <option value="4">Zone 4 — (301–600 mi)</option>
            <option value="5">Zone 5 — 중거리 (601–1,000 mi)</option>
            <option value="6">Zone 6 — (1,001–1,400 mi)</option>
            <option value="7">Zone 7 — (1,401–1,800 mi)</option>
            <option value="8">Zone 8 — 장거리 (1,801+ mi)</option>
          </select>
        </div>
        <div class="setting-group">
          <label for="das-tier">DAS 티어 <span class="tip"
              data-tip="배송지역 할증(Delivery Area Surcharge). 두 배송사에 공통 적용. 각 배송사 내부 DAS 금액은 다릅니다.">ⓘ</span></label>
          <select id="das-tier">
            <option value="None">None</option>
            <option value="Delivery Area">Delivery Area</option>
            <option value="Extended">Extended</option>
            <option value="Remote">Remote</option>
          </select>
        </div>
      </div>
    </section>

    <!-- ═══ Carrier-Specific Settings ═══ -->
    <section class="card">
      <div class="card-title"><span class="icon">🚚</span> 배송사별 설정</div>
      <div class="carrier-settings-row">
        <div class="carrier-col fedex-col">
          <div class="carrier-col-title">FedEx Ground 2025</div>
          <div class="carrier-col-body">
            <div class="setting-group">
              <label for="fuel-input">연료할증 (%) <span class="tip"
                  data-tip="기본운임에 추가되는 유류비 비율. FedEx 공지 기준 (보통 10~15%)">ⓘ</span></label>
              <input type="number" id="fuel-input" value="0" min="0" max="100" step="0.1">
            </div>
            <div class="setting-group">
              <label class="checkbox-label">
                <input type="checkbox" id="residential-check">
                <span>Residential 배송 <span class="tip"
                    data-tip="주거지 배송 할증 $5.95/개. 체크 시 FedEx에만 적용 (Amazon은 Residential 할증 없음)">ⓘ</span></span>
              </label>
            </div>
          </div>
        </div>
        <div class="carrier-col amazon-col">
          <div class="carrier-col-title">Amazon Shipping 2026</div>
          <div class="carrier-col-body">
            <div class="setting-group">
              <label for="diesel-select">경유가격 ($/gal) <span class="tip"
                  data-tip="미국 주간 평균 경유가격. DOE/EIA 기준으로 연료할증률 자동 산정됩니다.">ⓘ</span></label>
              <select id="diesel-select">
                <option value="2.90">$2.90 (14.50%)</option>
                <option value="3.02">$3.02 (14.75%)</option>
                <option value="3.14">$3.14 (15.00%)</option>
                <option value="3.26">$3.26 (15.25%)</option>
                <option value="3.38">$3.38 (15.50%)</option>
                <option value="3.50" selected>$3.50 (15.75%)</option>
                <option value="3.62">$3.62 (16.00%)</option>
                <option value="3.74">$3.74 (16.25%)</option>
                <option value="3.86">$3.86 (16.50%)</option>
                <option value="3.98">$3.98 (16.75%)</option>
                <option value="4.10">$4.10 (17.00%)</option>
                <option value="4.22">$4.22 (17.25%)</option>
                <option value="4.34">$4.34 (17.50%)</option>
                <option value="4.46">$4.46 (17.75%)</option>
                <option value="4.58">$4.58 (18.00%)</option>
              </select>
            </div>
            <div class="carrier-col-note">Residential 할증 없음 (항상 Commercial)</div>
          </div>
        </div>
      </div>
    </section>

    <!-- ═══ Comparison Results ═══ -->
    <section class="card">
      <div class="card-title"><span class="icon">📊</span> 비교 결과</div>
      <div class="table-scroll">
        <table class="compare-table">
          <thead>
            <tr>
              <th rowspan="2">#</th>
              <th rowspan="2">품명</th>
              <th colspan="4" class="th-fedex">FedEx Ground</th>
              <th colspan="4" class="th-amazon">Amazon Shipping</th>
              <th rowspan="2">차이</th>
              <th rowspan="2">수량</th>
            </tr>
            <tr>
              <th class="th-fedex-sub">청구(lb)</th>
              <th class="th-fedex-sub">운임</th>
              <th class="th-fedex-sub"><span class="tip" data-tip="추가 수수료 (AHS/Oversize/Unauth 등)">SC</span></th>
              <th class="th-fedex-sub">합계</th>
              <th class="th-amazon-sub">청구(lb)</th>
              <th class="th-amazon-sub">운임</th>
              <th class="th-amazon-sub"><span class="tip" data-tip="추가 수수료 (NonStd/AHS/LargePkg/ExtraHeavy 등)">SC</span></th>
              <th class="th-amazon-sub">합계</th>
            </tr>
          </thead>
          <tbody id="compare-tbody"></tbody>
        </table>
      </div>
    </section>

    <!-- ═══ Comparison Summary ═══ -->
    <section class="card">
      <div class="card-title"><span class="icon">💰</span> 비교 요약</div>
      <div class="table-scroll">
        <table class="summary-compare-table">
          <thead>
            <tr>
              <th></th>
              <th class="th-fedex">FedEx Ground</th>
              <th class="th-amazon">Amazon Shipping</th>
              <th>차이</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="row-label">활성 품목</td>
              <td id="sum-count" colspan="3" class="center-cell">0건 / 0개</td>
            </tr>
            <tr>
              <td class="row-label">운임 합계</td>
              <td id="sum-fedex-rate" class="fedex-cell">$0.00</td>
              <td id="sum-amzn-rate" class="amazon-cell">$0.00</td>
              <td id="sum-diff-rate" class="diff-cell"></td>
            </tr>
            <tr>
              <td class="row-label">SC 합계</td>
              <td id="sum-fedex-sc" class="fedex-cell">$0.00</td>
              <td id="sum-amzn-sc" class="amazon-cell">$0.00</td>
              <td id="sum-diff-sc" class="diff-cell"></td>
            </tr>
            <tr>
              <td class="row-label">Residential</td>
              <td id="sum-fedex-resi" class="fedex-cell">$0.00</td>
              <td id="sum-amzn-resi" class="amazon-cell">$0.00</td>
              <td id="sum-diff-resi" class="diff-cell"></td>
            </tr>
            <tr>
              <td class="row-label">DAS</td>
              <td id="sum-fedex-das" class="fedex-cell">$0.00</td>
              <td id="sum-amzn-das" class="amazon-cell">$0.00</td>
              <td id="sum-diff-das" class="diff-cell"></td>
            </tr>
            <tr class="grand-total-row">
              <td class="row-label">총 배송비</td>
              <td id="sum-fedex-grand" class="fedex-cell">$0.00</td>
              <td id="sum-amzn-grand" class="amazon-cell">$0.00</td>
              <td id="sum-diff-grand" class="diff-cell"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- ═══ Charts ═══ -->
    <section class="card">
      <div class="card-title"><span class="icon">📈</span> 비용 비교 그래프</div>
      <div class="chart-grid">
        <div class="chart-box">
          <div class="chart-box-title">품목별 비용 비교</div>
          <canvas id="chart-item-compare"></canvas>
        </div>
        <div class="chart-box">
          <div class="chart-box-title">비용 구성 비교</div>
          <canvas id="chart-cost-breakdown"></canvas>
        </div>
      </div>
    </section>

    </div><!-- end #tab-us -->

    <!-- ════════════════════════════════════════════════════════════ -->
    <!-- YAMATO TAB: Japan Domestic Shipping                        -->
    <!-- ════════════════════════════════════════════════════════════ -->
    <div id="tab-yamato" class="tab-content">

    <!-- ═══ Yamato Route Settings ═══ -->
    <section class="card">
      <div class="card-title"><span class="icon">⚙️</span> 경로 설정</div>
      <div class="settings-grid">
        <div class="setting-group">
          <label for="ym-origin">출발지 <span class="tip" data-tip="발송 지역을 선택하세요">ⓘ</span></label>
          <select id="ym-origin"></select>
        </div>
        <div class="setting-group">
          <label for="ym-destination">도착지 <span class="tip" data-tip="배송 도착 지역을 선택하세요">ⓘ</span></label>
          <select id="ym-destination"></select>
        </div>
        <div class="setting-group">
          <label class="checkbox-label">
            <input type="checkbox" id="ym-same-pref">
            <span>동일 현내 배송 <span class="tip" data-tip="같은 현(도도부현) 내 배송 시 할인 운임이 적용됩니다. 오키나와 제외.">ⓘ</span></span>
          </label>
        </div>
        <div class="setting-group">
          <label>결제 방법</label>
          <div class="unit-toggle" id="ym-payment">
            <button data-value="cash" class="active">현금</button>
            <button data-value="cashless">캐시리스</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ═══ Yamato Options ═══ -->
    <section class="card">
      <div class="card-title"><span class="icon">🔧</span> 옵션 / 할인</div>
      <div class="settings-grid">
        <div class="setting-group">
          <label for="ym-cool">Cool 서비스 <span class="tip" data-tip="냉장(0~10°C) 또는 냉동(-15°C). 사이즈 120 이하만 가능.">ⓘ</span></label>
          <select id="ym-cool">
            <option value="none">없음</option>
            <option value="chilled">냉장 (0~10°C)</option>
            <option value="frozen">냉동 (-15°C)</option>
          </select>
        </div>
        <div class="setting-group">
          <label class="checkbox-label">
            <input type="checkbox" id="ym-sameday">
            <span>당일 배송 (+¥550) <span class="tip" data-tip="오전 접수 → 당일 오후 배달. 오키나와 +¥330.">ⓘ</span></span>
          </label>
        </div>
        <div class="setting-group ym-discounts">
          <label>할인 <span class="tip" data-tip="여러 할인을 동시 적용 가능. 회원 지참할인은 일반 지참할인을 대체합니다.">ⓘ</span></label>
          <div class="discount-checks">
            <label class="checkbox-label"><input type="checkbox" data-discount="dropoff"><span>지참할인 (-¥110)</span></label>
            <label class="checkbox-label"><input type="checkbox" data-discount="digital"><span>디지털할인 (-¥60)</span></label>
            <label class="checkbox-label"><input type="checkbox" data-discount="multi_package"><span>복수구할인 (-¥100)</span></label>
            <label class="checkbox-label"><input type="checkbox" data-discount="branch_pickup"><span>영업소수취 (-¥60)</span></label>
          </div>
        </div>
      </div>
    </section>

    <!-- ═══ Yamato Results ═══ -->
    <section class="card">
      <div class="card-title"><span class="icon">📊</span> 계산 결과</div>
      <div class="table-scroll">
        <table class="compare-table yamato-theme">
          <thead>
            <tr>
              <th>#</th>
              <th>품명</th>
              <th>L×W×H</th>
              <th>중량(kg)</th>
              <th>3변합</th>
              <th>Size</th>
              <th>근거</th>
              <th>기본운임</th>
              <th>Cool</th>
              <th>할인</th>
              <th>합계/개</th>
              <th>수량</th>
              <th>소계</th>
            </tr>
          </thead>
          <tbody id="ym-result-tbody"></tbody>
        </table>
      </div>
    </section>

    <!-- ═══ Yamato Summary ═══ -->
    <section class="card">
      <div class="card-title"><span class="icon">💰</span> 요약</div>
      <div class="table-scroll">
        <table class="summary-compare-table yamato-theme">
          <thead>
            <tr>
              <th></th>
              <th class="th-yamato">Yamato TA-Q-BIN</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="row-label">활성 품목</td>
              <td id="ym-sum-count" class="center-cell">0건 / 0개</td>
            </tr>
            <tr>
              <td class="row-label">기본 운임</td>
              <td id="ym-sum-base" class="yamato-cell">¥0</td>
            </tr>
            <tr>
              <td class="row-label">Cool 할증</td>
              <td id="ym-sum-cool" class="yamato-cell">¥0</td>
            </tr>
            <tr>
              <td class="row-label">당일 배송</td>
              <td id="ym-sum-sameday" class="yamato-cell">¥0</td>
            </tr>
            <tr>
              <td class="row-label">할인 합계</td>
              <td id="ym-sum-discount" class="yamato-cell discount-amount">¥0</td>
            </tr>
            <tr class="grand-total-row">
              <td class="row-label">총 배송비</td>
              <td id="ym-sum-grand" class="yamato-cell">¥0</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="ym-sum-route" id="ym-sum-route"></div>
    </section>

    </div><!-- end #tab-yamato -->

    <!-- ═══ Footer ═══ -->
    <footer class="footer">
      <p>⚠️ 참고용 계산기입니다. 실제 청구액과 다를 수 있습니다.</p>
      <p id="meta-info"></p>
      <p>© 2025 MUSICUS</p>
    </footer>

  </div>

  <!-- ═══ Modal Overlay ═══ -->
  <div class="modal-overlay" id="modal-overlay" onclick="if(event.target===this) UI.closeModal()">
    <div class="modal" id="modal-content"></div>
  </div>

  <!-- ═══ Toast ═══ -->
  <div class="toast" id="toast"></div>

  <!-- ═══ Scripts ═══ -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="js/calculator.js"></script>
  <script src="js/amazon-calculator.js"></script>
  <script src="js/yamato-calculator.js"></script>
  <script src="js/data-loader.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/yamato-ui.js"></script>
  <script src="js/ui.js"></script>

</body>

</html>
